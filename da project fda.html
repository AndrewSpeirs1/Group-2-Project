<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>DA group project (FDA p2)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="da project fda_files/libs/clipboard/clipboard.min.js"></script>
<script src="da project fda_files/libs/quarto-html/quarto.js"></script>
<script src="da project fda_files/libs/quarto-html/popper.min.js"></script>
<script src="da project fda_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="da project fda_files/libs/quarto-html/anchor.min.js"></script>
<link href="da project fda_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="da project fda_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="da project fda_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="da project fda_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="da project fda_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">DA group project (FDA p2)</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="sec-FDA" class="level1">
<h1>Formal data analysis</h1>
<p>For the rest of the variables, namely age, sex, highest education qualification attained, sufficient vegetable intake and sufficient fruit intake, we can fit linear regression models to each of these individually to see whether they have a significant impact on the BMI of an individual. Here are the following models that we have fitted:</p>
<p>Model 2 (Age)</p>
<p><span class="math display">\[ y_i = \alpha_{Age} + \beta_{Age} \cdot Age + \epsilon_i\]</span></p>
<p>Model 3 (Sex) <span class="math display">\[y_i = \alpha_{Sex} + \beta_{Sex} \cdot  \mathbb{I}_{\mbox{Sex}}(x)+ \epsilon_i\]</span> Model 4 (Education) <span class="math display">\[y_i = \alpha_{Education} + \beta_{hg} \cdot  \mathbb{I}_{\mbox{hg}}(x) + \beta_{hnc/d} \cdot  \mathbb{I}_{\mbox{hnc/d}}(x) +\beta_{none} \cdot  \mathbb{I}_{\mbox{none}}(x) + \beta_{school} \cdot  \mathbb{I}_{\mbox{school}}(x) + \beta_{standard} \cdot  \mathbb{I}_{\mbox{standard}}(x)+\epsilon_i\]</span></p>
<ul>
<li><p>where the alpha is the value of the baseline, which is having a degree or equivalent</p></li>
<li><p>hg is higher grade or equivalent</p></li>
<li><p>hnc/d is higher national ceritficate/diploma or equivalent</p></li>
<li><p>none is no qualifcaitons</p></li>
<li><p>school is school level qualifications</p></li>
<li><p>standard is standard grade or equivalent</p></li>
</ul>
<p>Model 5 (Veg) <span class="math display">\[y_i = \alpha_4 + \beta_4 \cdot  \mathbb{I}_{\mbox{veg}}(x)+\epsilon_i\]</span> Model 6 (Fruit) <span class="math display">\[y_i = \alpha_5 + \beta_5 \cdot  \mathbb{I}_{\mbox{Fruit}}(x)+\epsilon_i\]</span></p>
<ul>
<li><p><span class="math inline">\(\alpha_j\)</span> represents the coefficient for the intercept term for model j</p></li>
<li><p><span class="math inline">\(\mathbb{I}_{\mbox{a}}(x)\)</span> is an indicator function that takes the value 1 when the subscript is true for the i’th observation</p></li>
<li><p><span class="math inline">\(\beta_{j.k}\)</span> represents the coefficient of each of the slope terms in the regression lines, however, for the education model, the slope term is chosen by the highest education level that was achieved by the i’th observation</p>
<div id="tbl-models" class="cell tbl-cap-location-top tbl-parent quarto-layout-panel anchored">
<div class="panel-caption table-caption">
<p>estimates of the coefficients for models 2,3,4,5, and 6</p>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">

<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
</div></div><div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
</div></div><div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
</div></div><div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
</div></div><div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
</div></div><div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
</div></div><div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
</div></div><div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
</div></div><div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">

</div></div><table class="kable_wrapper">


<tbody>


<tr>


<td>


<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: left;">estimate</th>
<th style="text-align: left;">p_value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">intercept</td>
<td style="text-align: left;">25.636</td>
<td style="text-align: left;">0.000</td>
</tr>
<tr class="even">
<td style="text-align: left;">Age</td>
<td style="text-align: left;">0.045</td>
<td style="text-align: left;">0.000</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
</div></div></td>


<td>


<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: left;">estimate</th>
<th style="text-align: left;">p_value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">intercept</td>
<td style="text-align: left;">27.898</td>
<td style="text-align: left;">0.000</td>
</tr>
<tr class="even">
<td style="text-align: left;">Sex: Male</td>
<td style="text-align: left;">0.056</td>
<td style="text-align: left;">0.544</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
</div></div></td>


<td>


<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: left;">estimate</th>
<th style="text-align: left;">p_value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">intercept</td>
<td style="text-align: left;">28.018</td>
<td style="text-align: left;">0.000</td>
</tr>
<tr class="even">
<td style="text-align: left;">Veg: Yes</td>
<td style="text-align: left;">−0.122</td>
<td style="text-align: left;">0.267</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
</div></div></td>


<td>


<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: left;">estimate</th>
<th style="text-align: left;">p_value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">intercept</td>
<td style="text-align: left;">27.752</td>
<td style="text-align: left;">0.000</td>
</tr>
<tr class="even">
<td style="text-align: left;">Fruit: Yes</td>
<td style="text-align: left;">0.248</td>
<td style="text-align: left;">0.013</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
</div></div></td>


</tr>


</tbody>


</table>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 100.0%;justify-content: center;">
<table class="table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;">term</th>
<th style="text-align: left;">estimate</th>
<th style="text-align: left;">p_value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">intercept</td>
<td style="text-align: left;">27.234</td>
<td style="text-align: left;">0.000</td>
</tr>
<tr class="even">
<td style="text-align: left;">Education: Higher grade or equiv</td>
<td style="text-align: left;">0.357</td>
<td style="text-align: left;">0.012</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Education: HNC/D or equiv</td>
<td style="text-align: left;">0.929</td>
<td style="text-align: left;">0.000</td>
</tr>
<tr class="even">
<td style="text-align: left;">Education: No qualifications</td>
<td style="text-align: left;">1.756</td>
<td style="text-align: left;">0.000</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Education: Other school level</td>
<td style="text-align: left;">1.440</td>
<td style="text-align: left;">0.000</td>
</tr>
<tr class="even">
<td style="text-align: left;">Education: Standard grade or equiv</td>
<td style="text-align: left;">0.800</td>
<td style="text-align: left;">0.000</td>
</tr>
</tbody>
</table>
</div>
</div>
</div></li>
</ul>
<p>From all of these models that have been fitted in <strong>?@tbl-models</strong> , we can observe the p-values of each of these, and we get the following results from them</p>
<ul>
<li><p>For model 2 (Age), we can see that the p-value is roughly 0, thus meaning its statistically significant and therefore age has a significant impact on the BMI of a person</p></li>
<li><p>For model 3 (Sex), we can see that the p-value is 0.544, which is above our chosen signicance level of <span class="math inline">\(\alpha = 0.05\)</span> and therefore we can say that this model is not statistically significant, hence sex doesn’t have a significant effect on BMI</p></li>
<li><p>For model 4 (Education), we see that the p-values are all 0 except for when the observed person has achieved a higher grade or equivalent, where its 0.012, all of these p-values are below the significance level and so we can say that BMI is affected by education level</p></li>
<li><p>For model 5 (Veg), we have that the p-value is equal to 0.267, and since this is greater than our significance level, we can see that this model is not statistically significant and therefore whether you eat sufficient vegetables or not does not have a significant impact on your BMI</p></li>
<li><p>For model 6 (Fruit), we have that the p-value is 0.013, which is less than the significance level, therefore we can say that this model is statistically significant and hence whether your fruit intake is sufficient can have a significant impact on your BMI</p></li>
</ul>
<p>Now, since we have chosen three models that are statistically significant (Age, Education and Fruit), we can now test for the assumptions of each of these models.</p>
<p>We shall begin with the Age model</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-agemodelass" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="da-project-fda_files/figure-html/fig-agemodelass-1.png" class="img-fluid figure-img" width="960"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Assumption checking for Age model</figcaption>
</figure>
</div>
</div>
</div>
<p>As we can see from <a href="#fig-agemodelass">Figure&nbsp;1</a> , we have that there is an even spread of the residuals above and below the zero line in both the graph of residuals against Age (left) and against fitted values (middle), with a few outliers above, however due to n being large we can ignore these. In the histogram of residuals we also have the residuals are centered at zero however they are slightly right skewed.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-edumodelass" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="da-project-fda_files/figure-html/fig-edumodelass-1.png" class="img-fluid figure-img" width="1440"></p>
<figcaption class="figure-caption">Figure&nbsp;2: Assumption checking for Education model</figcaption>
</figure>
</div>
</div>
</div>
<p>In the plot of residuals against highest education qualification attained in <a href="#fig-edumodelass">Figure&nbsp;2</a> ,(left), we can see in the there is an even split of the residuals above and below the zero line, thus implying that the residuals have mean zero. In the histogram of residuals (right), the residuals are centered at zero however there is a slight right skew once again.</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-fruitmodelass" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="da-project-fda_files/figure-html/fig-fruitmodelass-1.png" class="img-fluid figure-img" width="960"></p>
<figcaption class="figure-caption">Figure&nbsp;3: Assumption checking for fruit model</figcaption>
</figure>
</div>
</div>
</div>
<p>In the plot of residuals against fruit in <a href="#fig-fruitmodelass">Figure&nbsp;3</a> (left), it is clear that there is a rough even spread of results above and below the zero line with a few outliers far above however these can be ignored due to n being so large, this implies residuals with mean 0. In the histogram of residuals (right), we can see that its once again centered at 0 however slightly right skewed.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>